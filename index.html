<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Sitemap-generator by AICIDNN</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Sitemap-generator</h1>
        <h2>sitemap-generator is a Rails plugin that makes it easy to generate sitemaps.</h2>

        <section id="downloads">
          <a href="https://github.com/AICIDNN/sitemap-generator/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/AICIDNN/sitemap-generator/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/AICIDNN/sitemap-generator" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p>Until we have time to improve this plugin, we recommend that you use this plugin:
"<a href="https://github.com/alexrabarts/big_sitemap%22:https://github.com/alexrabarts/big_sitemap">https://github.com/alexrabarts/big_sitemap":https://github.com/alexrabarts/big_sitemap</a></p>

<p>h1. Rails Sitemap Generator</p>

<p>The Rails Sitemap Generator plugin makes it very easy to generate sitemaps for your Rails app.</p>

<p>In addition to simplifying sitemap creation the plugin also includes the following features:</p>

<ul>
<li>Sitemap validation. A sitemap can contain about 50 000 items and be no more than x MB.</li>
<li>Search engine ping. The plugin notifies search engines each time your sitemap is updated.</li>
</ul>

<p>h2. Installation</p>

<p>Installation is done with the script/plugin script:</p>

<pre>
  <code>
  $ script/plugin install  git://github.com/christianhellsten/sitemap-generator.git
  </code>
</pre>

<p>After installing the plugin you need to:</p>

<ul>
<li>Configure the plugin (config/sitemap.yml)</li>
<li>Include a call to the <em>sitemap</em> method from each model you want to include in the sitemap</li>
</ul>

<p>h2. Configuring the plugin</p>

<p>A configuration file (config/sitemap.yml) is automatically created by the installation script. </p>

<p>Below is a sample configuration file, which also contains the default values for the models:</p>

<pre>
  <code>
  domain: aktagon.com

  limit: 5000
  priority: 1
  change_frequency: weekly
  ping: true
  </code>
</pre>

<p>The options:</p>

<ul>
<li>domain: before using the sitemap generator you need to tell the plugin the domain where your application is deployed. This is because the sitemap must contain the full URL, not just the URI, of all resources.</li>
<li>limit: specifies how many model instances you want to include in the sitemap</li>
<li>priority: specifies the priority of the model</li>
<li>change_frequency: specifies how often the data changes: always, hourly, daily, weekly, monthly, yearly or never</li>
<li>ping: specifies whether the plugin should ping search engines or not</li>
</ul>

<p>You can find a more comprehensive description of these concepts on the "Wikipedia page on sitemaps":<a href="http://en.wikipedia.org/wiki/Sitemaps">http://en.wikipedia.org/wiki/Sitemaps</a></p>

<p>h2. Configuring ActiveRecord models</p>

<p>Each model you want included in the sitemap must call the <em>sitemap(options)</em> method.</p>

<pre>
  <code>
  class Post 
</code></pre>

<p>The default options for each model are taken from the configuration file (config/sitemap.yml). You'll most likely want each model to have a different priority and change_frequency. The plugin allows you to override the default options as shown in this example:</p>

<pre>
  <code>
  class Post  :weekly, :limit =&gt; 1000, :priority =&gt; 0.5
  end
  </code>
</pre>

<p>h2. Order</p>

<p>The plugin will automatically order the data using the most appropriate Rails magic column, which is the first of the following columns it can find: updated_at, updated_on, created_at or created_on.</p>

<p>You can override this behavior when calling the sitemap method:</p>

<pre>
  <code>
  class Post  'points DESC'
  end
  </code>
</pre>

<p>h2. Custom sitemaps</p>

<p>Custom sitemaps can be generated by passing a block to the sitemap method. A builder instance representing the sitemap is passed to this block. Inside the block you can do whatever is needed:</p>

<pre>
  <code>

  sitemap do |xml|

    Post.all.each do |place|
      xml.url do
        xml.loc "http://#{SitemapGenerator::Options.domain}/#{post.to_param}'"

        xml.lastmod SitemapGenerator::Helpers.instance.w3c_date(post.updated_at)
        xml.changefreq 'weekly'
        xml.priority '1'
      end  
    end  

  end

  </code>
</pre>

<p>h2. Usage</p>

<p>After configuring the plugin you can generate the sitemap with rake:</p>

<pre>
  <code>
  $ rake sitemap:generate
  </code>
</pre>

<p>You can also generate the sitemap programatically like this:</p>

<pre>
  <code>
  SitemapGenerator::Generator.run
  </code>
</pre>

<p>h2. Scheduled updates with cron</p>

<p>Open the cron configuration with the following command:</p>

<pre>
<code>
$ sudo crontab -e
</code>
</pre>

<p>Add the following:</p>

<pre>
<code>
PATH=/usr/local/bin:/usr/bin:/bin
SHELL=/bin/bash

# m h  dom mon dow   command

# Update the sitemap every day at 24:00

00 00 * * * cd /var/www/xxx/current &amp;&amp; RAILS_ENV=production rake sitemap:generate
</code>
</pre>

<p>h2. Todo</p>

<ul>
<li>Support for "video and image sitemaps":<a href="http://www.google.com/support/webmasters/bin/topic.py?hl=en&amp;topic=20986">http://www.google.com/support/webmasters/bin/topic.py?hl=en&amp;topic=20986</a>
</li>
<li>"Sitemap validation":<a href="http://www.google.com/support/webmasters/bin/answer.py?hl=en&amp;answer=35738">http://www.google.com/support/webmasters/bin/answer.py?hl=en&amp;answer=35738</a>
</li>
<li>gzip sitemap</li>
<li>gem</li>
<li>Refactor code</li>
</ul>

<p>h2. Author</p>

<p>"Christian Hellsten":<a href="http://christianhellsten.com">http://christianhellsten.com</a> ("Aktagon Ltd.":<a href="http://aktagon.com">http://aktagon.com</a>)</p>

<p>h2. Contributors</p>

<p>"Dan Hawkins":<a href="http://github.com/danhawkins/">http://github.com/danhawkins/</a></p>
      </section>
    </div>

    
  </body>
</html>
